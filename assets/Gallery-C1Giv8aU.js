import{r as l,m,j as a}from"./index-ekhgIEl4.js";const j=()=>{const[d,s]=l.useState([]),[g,o]=l.useState(!0),[n,i]=l.useState(null);l.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const e=`?t=${Date.now()}`,r=await m.getAll(e);r&&Array.isArray(r)?(s(r),i(null)):(i("Invalid data format received from server."),s([]))}catch(e){i(`Failed to load gallery: ${e.message||"Unknown error"}. Please check your connection and try again.`),s([])}finally{o(!1)}};return g?a.jsx("div",{className:"gallery-page",children:a.jsx("div",{className:"container",children:a.jsx("div",{className:"loading",children:"Loading gallery..."})})}):n?a.jsx("div",{className:"gallery-page",children:a.jsx("div",{className:"container",children:a.jsx("div",{className:"error-message",children:n})})}):a.jsx("div",{className:"gallery-page",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"gallery-header",children:[a.jsx("h1",{className:"page-title",children:"Our Work"}),a.jsx("p",{className:"page-subtitle",children:"Beautiful braids created by our expert stylists"})]}),d.length===0?a.jsxs("div",{className:"empty-gallery",children:[a.jsx("div",{className:"empty-icon",children:"ðŸ“¸"}),a.jsx("h2",{children:"No images yet"}),a.jsx("p",{children:"Check back soon to see our beautiful work!"})]}):a.jsx("div",{className:"gallery-grid",children:d.map(e=>{const r=e.type==="placeholder"||!e.imageUrl||e.imageUrl===null,c=!r&&(e.type==="video"||e.videoUrl||e.imageUrl&&e.imageUrl.match(/\.(mp4|webm|ogg)$/i));return a.jsx("div",{className:`gallery-item ${c?"video-item":""} ${r?"placeholder-item":""}`,children:a.jsxs("div",{className:"gallery-media-wrapper",children:[r?a.jsx("div",{className:"gallery-placeholder",children:a.jsx("span",{className:"placeholder-emoji",children:e.emoji||"ðŸ“¸"})}):c?a.jsx("video",{src:e.videoUrl||e.imageUrl,className:"gallery-media",controls:!0,preload:"metadata",poster:e.posterUrl?e.posterUrl.startsWith("http")?e.posterUrl:`https://touba-hair-hs.onrender.com${e.posterUrl}`:void 0,children:"Your browser does not support the video tag."}):a.jsx("img",{src:e.imageUrl.startsWith("http")?e.imageUrl:`https://touba-hair-hs.onrender.com${e.imageUrl}`,alt:e.title||"Gallery image",className:"gallery-media",loading:"lazy",onError:p=>{console.error("Failed to load image:",e.imageUrl);const t=p.target.parentElement;t&&(t.innerHTML=`<div class="gallery-placeholder"><span class="placeholder-emoji">${e.emoji||"ðŸ“¸"}</span></div>`)}}),a.jsx("div",{className:"gallery-overlay",children:a.jsxs("div",{className:"gallery-info",children:[c&&a.jsx("span",{className:"video-badge",children:"â–¶ Video"}),a.jsx("h3",{className:"gallery-title",children:e.title}),e.description&&a.jsx("p",{className:"gallery-description",children:e.description}),e.braiderName&&a.jsxs("p",{className:"gallery-braider",children:["Stylist: ",e.braiderName]}),e.serviceType&&a.jsx("p",{className:"gallery-service",children:e.serviceType})]})})]})},e.id)})})]})})};export{j as default};
