import{u as y,e as S,r as o,j as e,h as E,l as C,f as k,d as A}from"./index-ekhgIEl4.js";import{t as j}from"./toast-6IGnTReI.js";const F=()=>{var x,g;const t=y(),f=S(),[i,w]=o.useState({email:"",password:""}),[m,r]=o.useState(""),[h,u]=o.useState(!1),[n,b]=o.useState(!1),[c,d]=o.useState("checking"),v=((g=(x=f.state)==null?void 0:x.from)==null?void 0:g.pathname)||"/my-bookings";o.useEffect(()=>{(async()=>{var a;try{const s=await E();s.status==="ok"&&((a=s.database)!=null&&a.isConnected)?d("online"):(d("degraded"),r("Server is starting up. Please wait a moment and try again."))}catch{d("offline"),r("Cannot connect to server. The backend may be starting up. Please wait a moment.")}})()},[]);const p=l=>{w({...i,[l.target.name]:l.target.value}),r("")},N=async l=>{l.preventDefault(),r(""),u(!0);try{const a=await C(i.email,i.password);if(a.success)requestAnimationFrame(()=>{k()?t("/admin",{replace:!0}):A()?t("/braider-profile",{replace:!0}):t(v,{replace:!0})});else{const s=a.error||"Invalid email or password";j.error(s),r(s)}}catch(a){const s=a.message||"An error occurred. Please try again.";j.error(s),r(s)}finally{u(!1)}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{className:"login-title",children:"Welcome Back"}),e.jsx("p",{className:"login-subtitle",children:"Sign in to access your account"})]}),c==="offline"&&e.jsx("div",{className:"error-message",style:{backgroundColor:"#fff3cd",color:"#856404",border:"1px solid #ffc107"},children:"⚠️ Server is offline. The backend may be starting up. Please wait a moment and refresh."}),c==="degraded"&&e.jsx("div",{className:"error-message",style:{backgroundColor:"#fff3cd",color:"#856404",border:"1px solid #ffc107"},children:"⚠️ Database is connecting. Please wait a moment and try again."}),m&&c==="online"&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("form",{onSubmit:N,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:p,required:!0,placeholder:"your.email@example.com",autoComplete:"email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"password-input-wrapper",children:[e.jsx("input",{type:n?"text":"password",id:"password",name:"password",value:i.password,onChange:p,required:!0,placeholder:"Enter your password",autoComplete:"current-password",className:"password-input"}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>b(!n),"aria-label":n?"Hide password":"Show password",title:n?"Hide password":"Show password",children:n?e.jsx("span",{className:"password-icon","aria-hidden":"true",children:"Hide"}):e.jsx("span",{className:"password-icon","aria-hidden":"true",children:"Show"})})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-large",disabled:h,children:h?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"login-demo",children:[e.jsx("h3",{children:"Demo Accounts"}),e.jsxs("div",{className:"demo-accounts",children:[e.jsxs("div",{className:"demo-account",children:[e.jsx("strong",{children:"Admin:"}),e.jsx("p",{children:"Email: admin@toubahair.com"}),e.jsx("p",{children:"Password: Admin123!@#"}),e.jsx("small",{children:"Full access to admin dashboard"})]}),e.jsxs("div",{className:"demo-account",children:[e.jsx("strong",{children:"Employee (Example):"}),e.jsx("p",{children:"Email: mariama@toubahair.com"}),e.jsx("p",{children:"Password: Employee123!"}),e.jsx("small",{children:"Access braider dashboard"})]}),e.jsxs("div",{className:"demo-account",children:[e.jsx("strong",{children:"Client (Example):"}),e.jsx("p",{children:"Email: customer1@example.com"}),e.jsx("p",{children:"Password: Customer123!"}),e.jsx("small",{children:"Access bookings & rewards"})]}),e.jsx("div",{className:"demo-account-note",children:e.jsx("small",{children:"See DEMO_CREDENTIALS.md for all accounts"})})]})]}),e.jsxs("div",{className:"login-footer",children:[e.jsxs("p",{children:["Don't have an account? ",e.jsx("a",{href:"/register",children:"Sign up here"})]}),e.jsxs("p",{children:["Are you a braider? ",e.jsx("a",{href:"/braider-register",children:"Create braider account"})]})]})]})})})};export{F as default};
